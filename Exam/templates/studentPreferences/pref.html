{% extends 'base.html' %}
{% load static %}

{% block body %}
<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="{% static 'css/student_dashboard.css' %}">
<div class="container mt-4">
  {% include 'partials/_messages.html' %}
</div>
<div class="hero-section">
  <h1>Account Preferences</h1>
  <p>Manage your email notifications and password settings below.</p>
</div>
<div class="dashboard-cards" style="flex-wrap: wrap; justify-content: center; gap: 2rem;">
  <!-- Email Notifications Card -->
  <div class="dashboard-card" style="max-width: 400px; min-width: 280px; flex: 1 1 320px;">
    <span class="icon"><i class="bi bi-envelope-paper"></i></span>
    <h2>Email Notifications</h2>
    <p style="color: #4a5568; font-size: 1rem; margin-bottom: 1.2em;">Receive an email when you log in to your account.</p>
    <form method="post" action="{% url 'email-student-pref' %}" style="width:100%;">
      {% csrf_token %}
      <div class="input-group mb-3">
        <select name="email_pref" class="custom-select form-control" id="inputGroupSelect04" aria-label="Example select with button addon">
          {% if student_preference %}
            <option selected name="email_pref" value="{{ student_preference.sendEmailOnLogin }}">{{ email_pref_value }}</option>
            <option name="email_pref" value="False">Off</option>
            <option name="email_pref" value="True">On</option>
          {% else %}
            <option selected name="email_pref" value="True">On</option>
            <option name="email_pref" value="False">Off</option>
          {% endif %}
        </select>
        <div class="input-group-append">
          <button class="btn btn-outline-primary" type="submit" value="Save">Save</button>
        </div>
      </div>
    </form>
  </div>
  <!-- Change Password Card -->
  <div class="dashboard-card" style="max-width: 400px; min-width: 280px; flex: 1 1 320px;">
    <span class="icon"><i class="bi bi-key"></i></span>
    <h2>Change Password</h2>
    <p style="color: #4a5568; font-size: 1rem; margin-bottom: 1.2em;">Update your account password for better security.</p>
    <a href="{% url 'change_password' %}" class="btn btn-warning btn-sm mt-2"><i class="bi bi-shield-lock"></i> Change Password</a>
  </div>
</div>
{% endblock %}
